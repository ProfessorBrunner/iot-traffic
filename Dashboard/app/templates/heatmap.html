<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Heatmaps</title>
    <link rel="stylesheet" href="../static/css/custom.css">
    <link rel="stylesheet" href="../static/css/w2ui-1.4.3.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  </head>
  <style>
    #legend {
      background: white;
      padding: 10px;
    }
  </style>
  <body>
    <script>
    var map, heatmap, carData, weatherData, circle ;

    function toggleAlerts(){
      if(circle.visible)
        circle.setVisible(false);
      else {
        circle.setVisible(true);

      }

    }

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 16,
        // center: {lat: 40.12008951, lng: -88.23704624},
        center: {lat: 40.120121396855815, lng: -88.24756819386668},
        mapTypeId: google.maps.MapTypeId.MAP
      });
      var center = {lat: 40.120121396855815, lng: -88.24756819386668}
      map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(
  document.getElementById('legend'));
      circle = new google.maps.Circle({
            	center : center,
            	radius : 35,
              strokeColor: '#FF0000',
              strokeOpacity: 0.8,
              strokeWeight: 2,
              fillColor: '#FF0000',
              fillOpacity: 0.35,
               editable: true,
            	map : map,
              draggable: true
            });
      circle.visible = false;
    }
    //
    // function sendMessage(){
    //   var b = $("#messageArea").text();
    //   console.log(b);
    // };
    // $(document).ready(function(){
    //   $("#pp").click(function(){
    //     // alert("button clicked");
    //     $('#popup1').w2popup();
    //   });
    //
    // });
    </script>
    <div id="floating-panel">
      <button onclick="toggleHeatmap()">Toggle Heatmap</button>
      <!-- <button onclick="changeGradient()">Change gradient</button> -->
      <!-- <button onclick="changeRadius()">Change radius</button> -->
      <button onclick="changeOpacity()">Change opacity</button>
      <!-- <button onclick="clearMarkers()">clear markers</button> -->
      <!-- <button onclick="clearHeatmap()">clear heatmap</button> -->
      <button onclick="startData()">Start Visualization</button>
      <button onclick="stopData()">Stop Visualization</button>
      <button onclick="toggleAlerts()">Toggle send alerts</button>
      <button type="button" class="btn btn-link"><a href="/accident">View Analytics</a></button>
      <!-- <button id="pp">Show popup</button> -->
      <!-- <button onclick="showAccidentZones()">Accident Zones </button> -->
    </div>
    <div id="map">
    </div>
    <div id="legend">
      <p>
        <div style="width:18px; height: 5px; background-color: red"></div>
          Accident zone
          <div style="width:18px; height: 5px; background-color: blue"></div>
            Road construction
            <div style="width:18px; height: 5px; background-color: #00BFFF"></div>
              Icy roads
      </p>
    </div>

    <div id="popup1" style="display: none; width: 371px; height: 234px; overflow: auto">
      <div rel="title">
          Enter message to send
      </div>
      <div rel="body">
        <textarea name="name" rows="8" cols="40" placeholder="enter message" id="messageArea">

        </textarea>
        <button type="button" name="button" class="btn btn-primary" id="sendMessage" onclick="sendMessage()">Send message</button>
      </div>

    </div>

    <!-- <script type="text/javascript" src="../static/js/car.js"></script> -->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAJNteQ20AjxpT8ASP79okCAv1AxW7_q7Y&signed_in=true&libraries=visualization&callback=initMap">
    </script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
    <script type="text/javascript" src="../static/js/init.js"></script>
    <script type="text/javascript" src="../static/js/w2ui-1.4.3.min.js"></script>
    <script type="text/javascript" src="../static/js/weather.js"></script>
    <script type="text/javascript" src="../static/js/car.js"></script>
  </body>
</html>
